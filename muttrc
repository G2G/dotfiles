####################
# Account Settings #
####################

# Mailbox
set mbox_type=Maildir
set folder=$HOME/mail
set spoolfile=+/INBOX
set header_cache=~/.hcache
set postponed = "+/Drafts"
set record = "+/Sent Items"
source ~/.mutt/mailboxes

# Personal
set realname='Peter Hogg'
set from='peter@havenaut.net'
set reverse_name=yes
set reverse_realname=yes
alternates pm@pig-monkey.com peter@itstactical.com peter@tripleaughtdesign.com
send-hook . "set signature=~/.mutt/sigs/hogg"
send-hook "~f pig-monkey.com" "set signature=~/.mutt/sigs/pigmonkey"

# Sending
set envelope_from=yes
set sendmail='/usr/bin/msmtp'

# Include extra work-specific settings
source ~/.mutt/workrc


####################
# General Settings #
####################

# Basic
set timeout=3
set mail_check=0
set wait_key=no
set delete
set pipe_decode
set mailcap_path=~/.mutt/mailcap
set edit_headers=yes
set query_command="ppl mutt -i '%s'"
set fast_reply
set forward_format="Fwd: %s"
set use_domain=no
set user_agent=no
set hostname="mail.havenaut.net"

# HTML Messages
auto_view text/html
alternative_order text/plain text/html

# Printing
set print_command="$HOME/.mutt/print.sh"

# PGP
source /etc/Muttrc.gpg.dist
set pgp_replyencrypt=yes
set pgp_replysign=yes
set pgp_replysignencrypted=yes

# Status Bar
set status_chars=" *%A"
set status_format="───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Index View
set date_format="%m/%d %H:%M"
set index_format="[%Z]  %D  %-20.20F  %s"
set sort=threads
set sort_aux=reverse-last-date-received
set uncollapse_jump

# Sidebar Plugin
set sidebar_delim='  │'
set sidebar_visible=yes
set sidebar_width=24


################
# Key Bindings #
################

# Index
bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
bind index <tab>    sync-mailbox
bind index <space>  collapse-thread
bind index \\       collapse-all

# Pager
bind pager j next-line
bind pager k previous-line

# Sidebar
bind index,pager <down>   sidebar-next
bind index,pager <up>     sidebar-prev
bind index,pager <right>  sidebar-open

# Sync mail
macro index o "<shell-escape>mailcheck.sh -q<enter>"
macro index O "<shell-escape>mailcheck.sh<enter>"

# Archive mail
macro index,pager A "s+Archive<enter>"

# Launch address book
macro generic,index,pager B "<shell-escape>ppl shell<return>"


# Add sender to address book
macro index,pager a "<pipe-message>ppl scrape --sender<return>" 

# Bind ; to ctrl-t in editor mode
macro editor ";" \Ct


##########
# Colors #
##########

source ~/.mutt/solarized/mutt-colors-solarized-dark-16.muttrc
color indicator default black
color index black default "~D"
color sidebar_new blue default
