source "gpg --quiet --batch -d ~/.smtp-havenaut.gpg |"

####################
# Account Settings #
####################

# Mailbox
set mbox_type=Maildir
set folder=$HOME/Mail
set spoolfile=+/INBOX
set header_cache=~/.hcache
set postponed = "+/Drafts"
set record = "+/Sent"
source ~/.mutt/mailboxes

# Personal
set realname='Peter Hogg'
set from='peter@havenaut.net'
set reverse_name=yes
set reverse_realname=yes
alternates pm@pig-monkey.com peter@itstactical.com
send-hook . "set signature=~/.mutt/sigs/hogg"
send-hook "~f pig-monkey.com" "set signature=~/.mutt/sigs/pigmonkey"

# SMTP
set my_user=pigmonkey
set my_pass=$my_pw_personal
set smtp_url=smtp://$my_user:$my_pass@localhost:1090
set ssl_force_tls=yes
account-hook smtp://$my_user@localhost 'unset ssl_verify_host'

# Include extra work-specific settings
source ~/.mutt/workrc


####################
# General Settings #
####################

# Basic
set timeout=3
set mail_check=0
set delete
set pipe_decode
set mailcap_path=~/.mutt/mailcap
set edit_headers=yes
set fast_reply

# HTML Messages
auto_view text/html
alternative_order text/plain text/html

# PGP
source /etc/Muttrc.gpg.dist
set pgp_replyencrypt=yes
set pgp_replysign=yes
set pgp_replysignencrypted=yes

# Status Bar
set status_chars=" *%A"
set status_format="───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Index View
set date_format="%m/%d"
set index_format="[%Z]  %D  %-20.20F  %s"
set sort=threads
set sort_aux=reverse-last-date-received
set uncollapse_jump

# Sidebar Plugin
set sidebar_delim='  │'
set sidebar_visible=yes
set sidebar_width=24


################
# Key Bindings #
################

# Index
bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
bind index <tab>    sync-mailbox
bind index <space>  collapse-thread
bind index \\       collapse-all

# Pager
bind pager j next-line
bind pager k previous-line

# Sidebar
bind index,pager <down>   sidebar-next
bind index,pager <up>     sidebar-prev
bind index,pager <right>  sidebar-open

# Sync mail
macro index o "<enter-command>unset wait_key<enter><shell-escape>mailcheck.sh -q<enter><enter-command>set wait_key<enter>"
macro index O "<enter-command>unset wait_key<enter><shell-escape>mailcheck.sh<enter><enter-command>set wait_key<enter>"


##########
# Colors #
##########

source ~/.mutt/colors.zenburn
color sidebar_new color174 color234
